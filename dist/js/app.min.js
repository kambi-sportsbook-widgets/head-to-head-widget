!function(){"use strict";var t=Stapes.subclass({constructor:function(t){this.scope={},CoreLibrary.init().then(function(t){this.scope.args={title:"Head to Head",dataUrl:"head-to-head.json",historyLimit:6},Object.keys(t).forEach(function(i){this.scope.args[i]=t[i]}.bind(this)),CoreLibrary.getData(this.scope.args.dataUrl).then(function(t){this.scope.data=this.parseDataInfo(t),this.scope.stats=t.lastEvents,this.adjustHeight()}.bind(this))}.bind(this))["catch"](function(t){}),this.view=rivets.bind(document.getElementById("main"),this.scope)},adjustHeight:function(){var t=37,i=42,e=t;this.scope.stats.forEach(function(){e+=i}),CoreLibrary.widgetModule.setWidgetHeight(e)},parseDataInfo:function(t){var i=[],e=[],n=t.homeParticipant.participantName,s=t.awayParticipant.participantName;return t.lastEvents.forEach(function(t){var i={start:t.start,homeParticipant:t.homeParticipant.participantName,awayParticipant:t.awayParticipant.participantName,homeScore:t.scores[0].homeScore,awayScore:t.scores[0].awayScore,type:t.scores[0].type};return n===i.homeParticipant?(i.scoreOnLeft=i.homeScore,i.scoreOnRight=i.awayScore):(i.scoreOnLeft=i.awayScore,i.scoreOnRight=i.homeScore),e.push(i),e}),i.push({homeTeam:n,awayTeam:s,lastEvents:e}),i}}),t=new t}(),window.CoreLibrary=function(){"use strict";function t(t){if(t.status>=200&&t.status<300)return t;var i=new Error(t.statusText);throw i.response=t,i}function i(t){return t.json()}return sightglass.adapters=rivets.adapters,sightglass.root=".",{widgetModule:null,offeringModule:null,statisticsModule:null,config:{oddsFormat:"decimal",apiVersion:"v2",streamingAllowedForPlayer:!1},height:450,pageInfo:{},init:function(e){return new Promise(function(n,s){window.KambiWidget?window.self===window.top?fetch("mockSetupData.json").then(t).then(i).then(function(t){this.applySetupData(t,e),null!=this.translationModule?this.translationModule.fetchTranslations(t.clientConfig.locale).then(function(){n(t.arguments)}.bind(this)):n(t.arguments)}.bind(this))["catch"](function(t){s()}):(window.KambiWidget.apiReady=function(t){this.widgetModule.api=t,this.requestSetup(function(t){this.applySetupData(t,e),this.widgetModule.requestBetslipOutcomes(),this.widgetModule.requestOddsFormat(),null!=this.translationModule?this.translationModule.fetchTranslations(t.clientConfig.locale).then(function(){n(t.arguments)}.bind(this)):n(t.arguments)}.bind(this))}.bind(this),window.KambiWidget.receiveResponse=function(t){this.widgetModule.handleResponse(t)}.bind(this)):s()}.bind(this))},applySetupData:function(t,i){null!=t.clientConfig.oddsFormat&&this.setOddsFormat(t.clientConfig.oddsFormat),this.offeringModule.setConfig(t.clientConfig),this.widgetModule.setConfig(t.clientConfig),this.setPageInfo(t.pageInfo),null!=t.arguments&&t.arguments.hasOwnProperty("offering")&&this.offeringModule.setOffering(t.arguments.offering),i===!0&&this.setHeight(t.height),this.config=t},requestSetup:function(t){this.widgetModule.requestSetup(t)},receiveRespone:function(t){},setOddsFormat:function(t){this.config.oddsFormat=t},setHeight:function(t){this.height=t,this.widgetModule.setHeight(t)},setPageInfo:function(t){"filter"===t.pageType&&"/"!==t.pageParam.substr(-1)&&(t.pageParam+="/"),this.pageInfo=t},getData:function(e){return fetch(e).then(t).then(i)["catch"](function(t){})}}}(),CoreLibrary.offeringModule=function(){"use strict";return{config:{apiBaseUrl:null,apiUrl:null,channelId:null,currency:null,locale:null,market:null,offering:null,clientId:null,version:null,routeRoot:"",auth:!1,device:null},setConfig:function(t){for(var i in t)if(t.hasOwnProperty(i)&&this.config.hasOwnProperty(i))switch(this.config[i]=t[i],i){case"locale":}},setOffering:function(t){this.config.offering=t},getGroupEvents:function(t){var i="/event/group/"+t+".json";return this.doRequest(i)},getEventsByFilter:function(t,i){var e="/listView/"+t;return this.doRequest(e,i,"v3")},getLiveEvents:function(){var t="/event/live/open.json";return this.doRequest(t)},doRequest:function(t,i,e){if(null!=this.config.offering){var n=this.config.apiBaseUrl.replace("{apiVersion}",null!=e?e:this.config.version),s=n+this.config.offering+t,o=i||{},a={lang:o.locale||this.config.locale,market:o.market||this.config.market,client_id:o.clientId||this.config.clientId,include:o.include||null};return s+="?"+Object.keys(a).map(function(t){return encodeURIComponent(t)+"="+encodeURIComponent(a[t])}).join("&"),CoreLibrary.getData(s)}}}}(),CoreLibrary.statisticsModule=function(){"use strict";return{getStatistics:function(t,i){i=i.match(/[^?]*/)[0],i=i.slice(0,-1);var e="https://api.kambi.com/statistics/api/";return CoreLibrary.getData(e+CoreLibrary.config.offering+"/"+t+"/"+i+".json")}}}(),window.CoreLibrary.translationModule=function(){"use strict";var t={i18nStrings:{},fetchTranslations:function(i){null==i&&(i="en_GB");var e=this;return new Promise(function(n,s){e.getData("i18n/"+i+".json").then(function(i){t.i18nStrings=i,n()})["catch"](function(t){"en_GB"!==i?e.fetchTranslations("en_GB").then(n):n()})})}};return rivets.formatters.translate=function(i){return null!=t.i18nStrings[i]?t.i18nStrings[i]:i},t}(),CoreLibrary.widgetModule=function(){"use strict";return{api:{requestSetup:function(){},request:function(){},set:function(){},remove:function(){}},config:{routeRoot:"",auth:!1,device:null},setConfig:function(t){for(var i in t)t.hasOwnProperty(i)&&this.config.hasOwnProperty(i)&&(this.config[i]=t[i]);null==this.config.routeRoot?this.config.routeRoot="":this.config.routeRoot.length>0&&"/"!==this.config.routeRoot.slice(-1)&&(this.config.routeRoot+="/")},handleResponse:function(t){switch(t.type){case this.api.WIDGET_HEIGHT:break;case this.api.BETSLIP_OUTCOMES:break;case this.api.WIDGET_ARGS:break;case this.api.PAGE_INFO:break;case this.api.CLIENT_ODDS_FORMAT:break;case this.api.CLIENT_CONFIG:break;case this.api.USER_LOGGED_IN:break;case"Setup":}},requestSetup:function(t){this.api.requestSetup(t)},requestWidgetHeight:function(){this.api.request(this.api.WIDGET_HEIGHT)},setWidgetHeight:function(t){this.api.set(this.api.WIDGET_HEIGHT,t)},enableWidgetTransition:function(t){t?this.api.set(this.api.WIDGET_ENABLE_TRANSITION):this.api.set(this.api.WIDGET_DISABLE_TRANSITION)},removeWidget:function(){this.api.remove()},navigateToLiveEvent:function(t){this.navigateClient("event/live/"+t)},navigateToEvent:function(t){this.navigateClient("event/"+t)},navigateToFilter:function(t){this.navigateClient(t)},navigateToLiveEvents:function(){this.navigateClient(["in-play"])},addOutcomeToBetslip:function(t,i,e,n){var s=[];t.isArray()?s=t:s.push(t);var o={outcomes:s};null!=i&&(i.isArray()?o.stakes=i:o.stakes=[i]),o.couponType=1===s.length?this.api.BETSLIP_OUTCOMES_ARGS.TYPE_SINGLE:this.api.BETSLIP_OUTCOMES_ARGS.TYPE_COMBINATION,o.updateMode="replace"!==e?this.api.BETSLIP_OUTCOMES_ARGS.UPDATE_APPEND:this.api.BETSLIP_OUTCOMES_ARGS.UPDATE_REPLACE,null!=n&&(o.source=n),this.api.set(this.api.BETSLIP_OUTCOMES,o)},removeOutcomeFromBetslip:function(t){var i=[];t.isArray()?i=t:i.push(t),this.api.set(this.api.BETSLIP_OUTCOMES_REMOVE,{outcomes:i})},requestBetslipOutcomes:function(){this.api.request(this.api.BETSLIP_OUTCOMES)},requestPageInfo:function(){this.api.request(this.api.PAGE_INFO)},requestWidgetArgs:function(){this.api.request(this.api.WIDGET_ARGS)},requestClientConfig:function(){this.api.request(this.api.CLIENT_CONFIG)},requestOddsFormat:function(){this.api.request(this.api.CLIENT_ODDS_FORMAT)},requestOddsAsAmerican:function(t){return new Promise(function(i,e){this.api.requestOddsAsAmerican(t,function(t){i(t)})}.bind(this))},requestOddsAsFractional:function(t){return new Promise(function(i,e){this.api.requestOddsAsFractional(t,function(t){i(t)})})},navigateClient:function(t){if("string"==typeof t)this.api.navigateClient("#"+this.config.routeRoot+t);else if(t.isArray()){var i=this.api.createFilterUrl(t,this.config.routeRoot);this.api.navigateClient(i)}}}}();